<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elsa Coin App</title>
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #0d0d0d;
      color: gold;
      overflow: hidden;
    }
    #chart {
      width: 100%;
      height: 70vh;
    }
    .fractional-box, .buttons, .price-label {
      padding: 1em;
      text-align: center;
    }
    input[type="number"] {
      font-size: 1.2em;
      width: 60%;
      padding: 0.5em;
      border: none;
      border-radius: 5px;
      margin-top: 10px;
    }
    button {
      font-size: 1em;
      margin: 0.5em;
      padding: 0.6em 1.2em;
      border: none;
      border-radius: 5px;
      background: gold;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #ffd700;
    }
    nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      background: black;
      padding: 0.5em 0;
      border-top: 1px solid gold;
    }
    nav button {
      flex: 1;
      background: transparent;
      color: gold;
      border: none;
    }
    #settings, #support {
      position: absolute;
      top: 1em;
      right: 1em;
      display: flex;
      gap: 1em;
    }
    .tooltip {
      font-size: 0.8em;
      margin-top: 0.2em;
      color: #bbb;
    }
  </style>
</head>
<body><div id="settings">
  <button onclick="alert('Settings panel coming soon')">‚öôÔ∏è</button>
  <button onclick="alert('Customer Service: Contact us at support@elsa.app. See full guide below.')">‚ùì</button>
</div><div id="chart"></div>
<div class="price-label">Current Elsa Price: <span id="price">Loading...</span> USD</div>
<div class="fractional-box">
  <label for="usdAmount">Enter USD to Buy Elsa:</label>
  <input type="number" id="usdAmount" min="2" step="0.01" placeholder="e.g. 50" />
  <div class="tooltip">Minimum $2</div>
</div>
<div class="buttons">
  <button onclick="buyElsa()">Buy Elsa</button>
  <button onclick="resellElsa()">Resell Elsa</button>
</div><nav>
  <button onclick="alert('You are on the Home Chart page')">üìà Chart</button>
  <button onclick="alert('Wallet feature coming soon')">üí∞ Wallet</button>
  <button onclick="alert('Profile coming soon')">üë§ Profile</button>
  <button onclick="alert('Leaderboard coming soon')">üèÜ Leaderboard</button>
</nav><script>
  let chart = LightweightCharts.createChart(document.getElementById('chart'), {
    layout: { backgroundColor: '#0d0d0d', textColor: 'gold' },
    grid: { vertLines: { color: '#222' }, horzLines: { color: '#222' } },
    priceScale: { borderColor: '#71649C' },
    timeScale: { borderColor: '#71649C', timeVisible: true, secondsVisible: true },
  });
  const candleSeries = chart.addCandlestickSeries();

  function generateRandomData() {
    const now = Math.floor(Date.now() / 1000);
    let data = [];
    let price = 2000;
    for (let i = 30; i >= 0; i--) {
      let time = now - i * 60;
      let open = price;
      let close = open + (Math.random() * 60 - 30);
      let high = Math.max(open, close) + Math.random() * 20;
      let low = Math.min(open, close) - Math.random() * 20;
      price = close;
      data.push({ time, open, high, low, close });
    }
    return data;
  }

  let candleData = generateRandomData();
  candleSeries.setData(candleData);

  function updateChart() {
    const last = candleData[candleData.length - 1];
    const time = Math.floor(Date.now() / 1000);
    const close = last.close + (Math.random() * 60 - 30);
    const newPoint = {
      time,
      open: last.close,
      high: Math.max(last.close, close) + 10,
      low: Math.min(last.close, close) - 10,
      close
    };
    candleData.push(newPoint);
    candleSeries.update(newPoint);
    document.getElementById('price').innerText = `$${close.toFixed(2)}`;
  }

  setInterval(updateChart, 5000);

  function buyElsa() {
    const usd = parseFloat(document.getElementById('usdAmount').value);
    if (isNaN(usd) || usd < 2) {
      alert("Please enter at least $2 to buy Elsa");
      return;
    }
    const elsa = usd / candleData[candleData.length - 1].close;
    alert(`You bought ${elsa.toFixed(4)} Elsa for $${usd}`);
  }

  function resellElsa() {
    alert("Resell logic will be activated for verified users in the full app.");
  }
</script><!-- Full Customer Service Guide --><script>
  const fullGuide = `
Customer Support - Elsa App
===========================

Welcome to the Elsa Coin App. Here's everything you need to know:

1. Buy Elsa starting from $2 and above.
2. View live candlestick chart (automatically updates every 5 seconds).
3. Track your referral count and verification status.
4. Only verified users can resell Elsa.
5. Resale adds +30% if demand is high, or -30% if supply increases.
6. Withdrawals require at least $5 balance and supported bank accounts.
7. Support email: support@elsa.app.
8. Settings allow you to change theme and profile.

Use wisely and join the Elsa revolution!
`;
  console.log(fullGuide);
</script></body>
</html>
<script type="module">
  // Firebase config (replace with your latest if needed)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import {
    getFirestore,
    doc,
    setDoc,
    getDoc,
    updateDoc,
    increment,
    collection,
    addDoc,
    query,
    where,
    getDocs
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyApuMISYyAXo7Xdxa_FAYDG-tHaU5vJA6A",
    authDomain: "elsa-809c1.firebaseapp.com",
    projectId: "elsa-809c1",
    storageBucket: "elsa-809c1.appspot.com",
    messagingSenderId: "401983741723",
    appId: "1:401983741723:web:253c41bf6a9011d0483dbe"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Login/Register Logic
  const loginForm = document.getElementById("loginForm");
  const registerForm = document.getElementById("registerForm");

  const showToast = (msg, color = 'red') => {
    const toast = document.createElement('div');
    toast.textContent = msg;
    toast.style.cssText = `background:${color};color:#fff;padding:10px;position:fixed;top:10px;left:50%;transform:translateX(-50%);border-radius:8px;z-index:9999`;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 2500);
  };

  if (loginForm) {
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = e.target.email.value;
      const password = e.target.password.value;
      try {
        const userCred = await signInWithEmailAndPassword(auth, email, password);
        showToast('Login successful', 'green');
        window.location.reload();
      } catch (error) {
        showToast("Invalid credentials");
      }
    });
  }

  if (registerForm) {
    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = e.target.email.value;
      const password = e.target.password.value;
      const referral = e.target.referral.value || "none";
      try {
        const userCred = await createUserWithEmailAndPassword(auth, email, password);
        const userId = userCred.user.uid;
        await setDoc(doc(db, "users", userId), {
          email,
          balance: email === "eluxxes@gmail.com" ? 2000 : 0,
          referral,
          referred: 0,
          verified: false,
          role: "user",
          transactions: [],
          createdAt: Date.now()
        });
        showToast('Registered successfully', 'green');
        window.location.reload();
      } catch (error) {
        showToast("Registration failed");
      }
    });
  }

  onAuthStateChanged(auth, async (user) => {
    if (user) {
      document.querySelectorAll('.auth-only').forEach(el => el.style.display = 'block');
      const uid = user.uid;
      const docSnap = await getDoc(doc(db, "users", uid));
      const userData = docSnap.data();
      document.getElementById("profileName").textContent = userData.email;
      document.getElementById("userBalance").textContent = `$${userData.balance}`;
      document.getElementById("referralLink").textContent = `https://elsa.com?ref=${uid}`;
    }
  });

  document.getElementById("logoutBtn")?.addEventListener("click", () => {
    signOut(auth).then(() => window.location.reload());
  });

</script>

<!-- Sample Candle Chart Logic (use real library or Firebase feed) -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script>
  var options = {
    series: [{
      data: [
        { x: new Date().getTime(), y: [2000, 2010, 1995, 2005] },
        { x: new Date().getTime() + 60000, y: [2005, 2015, 2000, 2010] }
      ]
    }],
    chart: {
      type: 'candlestick',
      height: 350,
      animations: {
        enabled: true,
        easing: 'linear',
        dynamicAnimation: { speed: 1000 }
      }
    },
    title: {
      text: 'Live Elsa Chart',
      align: 'left'
    },
    xaxis: {
      type: 'datetime'
    },
    yaxis: {
      tooltip: { enabled: true }
    }
  };

  var chart = new ApexCharts(document.querySelector("#chart"), options);
  chart.render();

  setInterval(() => {
    let last = options.series[0].data[options.series[0].data.length - 1];
    let open = last.y[3];
    let close = open + Math.floor(Math.random() * 10 - 5);
    let high = Math.max(open, close) + 5;
    let low = Math.min(open, close) - 5;
    let newPoint = {
      x: new Date().getTime(),
      y: [open, high, low, close]
    };
    options.series[0].data.push(newPoint);
    if (options.series[0].data.length > 30) options.series[0].data.shift();
    chart.updateSeries(options.series);
  }, 3000);
</script>

</body>
</html>
