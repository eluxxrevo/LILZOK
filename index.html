<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ELSA Coin App</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom, #111, #222);
      color: #fff;
    }
    header, footer {
      background: #000;
      text-align: center;
      padding: 10px;
    }
    .container {
      padding: 20px;
    }
    .page {
      display: none;
    }
    .active {
      display: block;
    }
    nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
    }
    nav button {
      background: none;
      border: none;
      color: white;
      padding: 10px;
    }
    input, button {
      margin: 5px 0;
      padding: 10px;
      width: 100%;
    }
    #chart {
      background-color: #fff;
      display: block;
      margin: 0 auto;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
</head>
<body>
  <header>
    <h1>ELSA Coin</h1>
    <p>Endorsed by Reverend</p>
  </header>  <div class="container">
    <div id="auth" class="page active">
      <h2>Login / Register</h2>
      <input type="email" id="email" placeholder="Email">
      <input type="password" id="password" placeholder="Password">
      <button onclick="register()">Register</button>
      <button onclick="login()">Login</button>
    </div><div id="dashboard" class="page">
  <h2>Welcome, <span id="username"></span></h2>
  <p>Balance: <span id="balance">0</span> ELSA</p>
  <button onclick="buyElsa()">Buy ELSA</button>
  <button onclick="sellElsa()">Sell ELSA</button>
  <p id="msg"></p>
  <h3>Live Candle Chart</h3>
  <canvas id="chart" width="400" height="200"></canvas>
  <h3>Referral Link</h3>
  <p id="refLink"></p>
  <h3>Top Referrals</h3>
  <ul id="leaderboard"></ul>
  <button onclick="logout()">Logout</button>
</div>

  </div>  <nav>
    <button onclick="showPage('auth')">Auth</button>
    <button onclick="showPage('dashboard')">Dashboard</button>
  </nav>  <footer>
    <p>ELSA Â© 2025</p>
  </footer>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyApuMISYyAXo7Xdxa_FAYDG-tHaU5vJA6A",
      authDomain: "elsa-809c1.firebaseapp.com",
      projectId: "elsa-809c1",
      storageBucket: "elsa-809c1.firebasestorage.app",
      messagingSenderId: "401983741723",
      appId: "1:401983741723:android:253c41bf6a9011d0483dbe"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    let user;
    auth.onAuthStateChanged(async (u) => {
      if (u) {
        user = u;
        showPage('dashboard');
        document.getElementById('username').textContent = u.email;
        const doc = await db.collection('users').doc(u.uid).get();
        if (!doc.exists) {
          await db.collection('users').doc(u.uid).set({ balance: 0, referrals: 0 });
        }
        updateUI();
      }
    });

    async function register() {
      try {
        const email = emailEl.value;
        const password = passwordEl.value;
        await auth.createUserWithEmailAndPassword(email, password);
        if (email === 'eluxxes@gmail.com') {
          await db.collection('users').doc(auth.currentUser.uid).set({ balance: 2000, referrals: 0 });
        }
      } catch (e) {
        alert(e.message);
      }
    }

    async function login() {
      try {
        await auth.signInWithEmailAndPassword(emailEl.value, passwordEl.value);
      } catch (e) {
        alert("Invalid credentials");
      }
    }

    async function logout() {
      await auth.signOut();
      showPage('auth');
    }

    async function updateUI() {
      const uid = auth.currentUser.uid;
      const doc = await db.collection('users').doc(uid).get();
      const data = doc.data();
      document.getElementById('balance').textContent = data.balance;
      document.getElementById('refLink').textContent = `${location.origin}?ref=${uid}`;
      const topRefs = await db.collection('users').orderBy('referrals', 'desc').limit(5).get();
      leaderboard.innerHTML = '';
      topRefs.forEach(d => {
        leaderboard.innerHTML += `<li>${d.id.substring(0, 6)}...: ${d.data().referrals}</li>`;
      });
    }

    async function buyElsa() {
      const uid = auth.currentUser.uid;
      const doc = await db.collection('users').doc(uid).get();
      const balance = doc.data().balance;
      await db.collection('users').doc(uid).update({ balance: balance + 1 });
      msg.textContent = 'Successfully bought 1 ELSA';
      updateUI();
    }

    async function sellElsa() {
      const uid = auth.currentUser.uid;
      const doc = await db.collection('users').doc(uid).get();
      const balance = doc.data().balance;
      if (balance > 0) {
        await db.collection('users').doc(uid).update({ balance: balance - 1 });
        msg.textContent = 'Successfully sold 1 ELSA';
      } else {
        msg.textContent = 'Insufficient balance';
      }
      updateUI();
    }

    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    // Live updating candlestick-style chart simulation
    const chartCtx = document.getElementById('chart').getContext('2d');
    let price = 100;
    const priceData = [price];
    const chart = new Chart(chartCtx, {
      type: 'line',
      data: {
        labels: Array(10).fill(''),
        datasets: [{
          label: 'ELSA Price',
          data: priceData,
          borderColor: '#0f0',
          backgroundColor: 'rgba(0,255,0,0.1)',
          fill: true
        }]
      },
      options: {
        animation: false,
        scales: {
          y: { beginAtZero: false }
        }
      }
    });

    setInterval(() => {
      price += (Math.random() - 0.5) * 3;
      priceData.push(price);
      if (priceData.length > 10) priceData.shift();
      chart.data.datasets[0].data = priceData;
      chart.update();
    }, 1500);
  </script></body>
</html>
